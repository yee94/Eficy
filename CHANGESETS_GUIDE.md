# Changesets ä½¿ç”¨æŒ‡å—

## ä»€ä¹ˆæ˜¯ Changesetsï¼Ÿ

Changesets æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º monorepo è®¾è®¡çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œå®ƒå¯ä»¥ï¼š

- è‡ªåŠ¨ç®¡ç†ç‰ˆæœ¬å·
- ç”Ÿæˆ changelog
- æ”¯æŒé€‰æ‹©æ€§å‘å¸ƒ
- å¤„ç†ä¾èµ–å…³ç³»

## åŸºæœ¬ä½¿ç”¨

### 1. åˆ›å»º Changeset

å½“ä½ åšäº†æ›´æ”¹éœ€è¦å‘å¸ƒæ—¶ï¼š

```bash
pnpm changeset
```

è¿™ä¼šå¯åŠ¨ä¸€ä¸ªäº¤äº’å¼æµç¨‹ï¼š

1. **é€‰æ‹©åŒ…**ï¼šä½¿ç”¨ç©ºæ ¼é”®é€‰æ‹©éœ€è¦å‘å¸ƒçš„åŒ…
2. **é€‰æ‹©ç‰ˆæœ¬ç±»å‹**ï¼š
   - `major`ï¼šç ´åæ€§æ›´æ”¹
   - `minor`ï¼šæ–°åŠŸèƒ½
   - `patch`ï¼šé”™è¯¯ä¿®å¤
3. **è¾“å…¥æè¿°**ï¼šæè¿°è¿™æ¬¡æ›´æ”¹çš„å†…å®¹

### 2. æäº¤ Changeset

```bash
git add .changeset/
git commit -m "feat: add changeset for new features"
git push
```

### 3. è‡ªåŠ¨å‘å¸ƒ

å½“ PR åˆå¹¶åˆ° master åˆ†æ”¯æ—¶ï¼š
1. GitHub Actions ä¼šè‡ªåŠ¨æ£€æµ‹ changesets
2. åˆ›å»ºç‰ˆæœ¬ PR
3. åˆå¹¶ç‰ˆæœ¬ PR åè‡ªåŠ¨å‘å¸ƒåˆ° npm

## æ‰‹åŠ¨å‘å¸ƒ

### åˆ›å»ºç‰ˆæœ¬ PR

```bash
pnpm version
```

è¿™ä¼šï¼š
- è¯»å–æ‰€æœ‰ changesets
- æ›´æ–°ç‰ˆæœ¬å·
- ç”Ÿæˆ changelog
- åˆ›å»ºç‰ˆæœ¬ PR

### å‘å¸ƒåˆ° npm

```bash
pnpm release
```

è¿™ä¼šï¼š
- å‘å¸ƒæ‰€æœ‰åŒ…åˆ° npm
- åˆ›å»º git æ ‡ç­¾
- æ¸…ç† changesets

## ç‰ˆæœ¬ç±»å‹è¯´æ˜

### Major (ä¸»ç‰ˆæœ¬)
- ç ´åæ€§æ›´æ”¹
- API ä¸å…¼å®¹çš„æ›´æ”¹
- ä¾‹å¦‚ï¼šç§»é™¤åŠŸèƒ½ã€é‡å‘½å API

### Minor (æ¬¡ç‰ˆæœ¬)
- æ–°åŠŸèƒ½
- å‘åå…¼å®¹çš„æ›´æ”¹
- ä¾‹å¦‚ï¼šæ·»åŠ æ–° APIã€æ–°åŠŸèƒ½

### Patch (è¡¥ä¸ç‰ˆæœ¬)
- é”™è¯¯ä¿®å¤
- æ€§èƒ½ä¼˜åŒ–
- ä¾‹å¦‚ï¼šä¿®å¤ bugã€ä¼˜åŒ–æ€§èƒ½

## æœ€ä½³å®è·µ

### 1. åŠæ—¶åˆ›å»º Changeset
- æ¯æ¬¡åŠŸèƒ½å¼€å‘å®Œæˆåç«‹å³åˆ›å»º
- ä¸è¦ç­‰åˆ°å‘å¸ƒæ—¶æ‰åˆ›å»º

### 2. æ¸…æ™°çš„æè¿°
- ä½¿ç”¨ä¸­æ–‡æè¿°æ›´æ”¹å†…å®¹
- åˆ—å‡ºå…·ä½“çš„æ›´æ”¹ç‚¹
- è¯´æ˜å¯¹ç”¨æˆ·çš„å½±å“

### 3. é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ç±»å‹
- ä»”ç»†è€ƒè™‘ç‰ˆæœ¬ç±»å‹
- éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶

### 4. æµ‹è¯•å‘å¸ƒ
- åœ¨å‘å¸ƒå‰æµ‹è¯•æ„å»º
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

## ç¤ºä¾‹

### åˆ›å»º Changeset

```bash
$ pnpm changeset

ğŸ¦‹  Which packages would you like to include? ...
âœ” @eficy/reactive
âœ” @eficy/reactive-react
âœ” @eficy/core-jsx

ğŸ¦‹  Which type of change is this for @eficy/reactive?
âœ” minor - A new feature

ğŸ¦‹  What is the summary for this change?
âœ” æ·»åŠ äº†æ–°çš„å“åº”å¼ API

ğŸ¦‹  What is the summary for this change?
âœ” ä¼˜åŒ–äº† React é›†æˆæ€§èƒ½

ğŸ¦‹  What is the summary for this change?
âœ” æ›´æ–°äº† JSX è¿è¡Œæ—¶å®ç°
```

### ç”Ÿæˆçš„ Changeset æ–‡ä»¶

```markdown
---
"@eficy/reactive": minor
"@eficy/reactive-react": minor
"@eficy/core-jsx": minor
---

æ·»åŠ äº†æ–°çš„å“åº”å¼ API

ä¼˜åŒ–äº† React é›†æˆæ€§èƒ½

æ›´æ–°äº† JSX è¿è¡Œæ—¶å®ç°
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Changeset æ–‡ä»¶æ ¼å¼é”™è¯¯**
   - ç¡®ä¿ YAML æ ¼å¼æ­£ç¡®
   - æ£€æŸ¥åŒ…åæ˜¯å¦æ­£ç¡®

2. **ç‰ˆæœ¬å†²çª**
   - æ£€æŸ¥ä¾èµ–å…³ç³»
   - ç¡®ä¿ç‰ˆæœ¬å·åˆç†

3. **å‘å¸ƒå¤±è´¥**
   - æ£€æŸ¥ NPM_TOKEN é…ç½®
   - ç¡®ä¿åŒ…åå”¯ä¸€

## æ›´å¤šä¿¡æ¯

- [Changesets å®˜æ–¹æ–‡æ¡£](https://github.com/changesets/changesets)
- [è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶](https://semver.org/)
